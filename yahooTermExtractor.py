import yahoo.yql

def textify(html_snippet):

    import formatter, htmllib, StringIO, string

    class Parser(htmllib.HTMLParser):
        def anchor_end(self):
            self.anchor = None

    class Formatter(formatter.AbstractFormatter):
        pass

    class Writer(formatter.DumbWriter):
        def send_label_data(self, data):
            self.send_flowing_data(data)
            self.send_flowing_data(" ")

    o = StringIO.StringIO()
    p = Parser(Formatter(Writer(o)))
    p.feed(html_snippet)
    p.close()

    words = o.getvalue().split()
    return string.join(words)

text = """From Uncharted 4 to The Last Guardian, what secrets are Sony preparing for E3 and will it keep the PS4 ahead of the next gen console race?\n\nFollowing the delay of The Order: 1886 the PlayStation 4s list of first party exclusives for this Christmas is suddenly looking extremely thin: just Driveclub and The Last Of Us Remastered. The PlayStation 4 is still well ahead of the Xbox One in terms of global sales, but the release of a new cheaper version of Xbox One without Kinect creates the biggest challenge yet for Sonys early dominance of the new generation.\n\nOf course the Xbox One isnt doing much better for new releases this year either, with only Sunset Overdrive and the rumoured Halo remakes. But while with Microsoft its possible to make fairly accurate predictions about their future slate, and even Nintendo has hinted at some of its future plans, Sonys situation is much harder to read.\n\nSony has barely announced or hinted at any new games since the PlayStation 4 was first unveiled, which is odd because they have far more internal development studios than Microsoft. Thats why many of the rumours below are so vague, with studios admitting theyre working on something  but saying no more than that.\n\nIn fact there are other Sony developers beyond this, such as Japan Studio and London Studio, that are also clearly working on new titles. On top of that theres second party developers, such as Heavy Rains Quantic Dream, who are also believed to be working on new PlayStation 4-only games. And who knows, maybe Rockstar will finally reveal something of supposed PlayStation exclusive Agent.\n\nOne thing you can definitely expect to hear a lot about at E3 is indie gaming, particularly The Witness by Braid creator Jonathan Blow, and Sony-published titles like Rime, Everybodys Gone To The Rapture, Hohokum, and Helldivers. Since the beginning of the generation Sony has had much better relations with indie developers than Microsoft and theyll certainly continue to leverage that now, especially when they have gaps in the schedule to fill.\n\nOne of the other big questions about Sonys E3 plans is how much theyll focus on virtual reality headset Project Morpheus. Thanks to Oculus Rift and Facebook, VR headsets are a hot item at the moment and its easy to imagine Sony getting carried away and devoting a large proportion of their Monday media briefing to the device.\n\nThe problem with that though is that not only is it very hard to demonstrate VR just by watching someone else use it but Morpheus is unlikely to be out for a very long time, and Sonys immediate problem is showing off games you can buy in the more immediate future\n\nThe list below is all for the PlayStation 4, except for Gravity Rush 2. Although many of the indie titles mentioned above will also be on PS Vita.\n\nThe Order: 1886\n\n Based simply on how much of it has been seen in public before its no surprise that The Order has been delayed. A single-player only third person shooter set in a steampunk version of Victorian London, the game is certainly unique; Although its central appeal at the moment remains the amazing graphics, despite developer Ready At Dawn only previously being known for the PSP God Of War games and HD remakes. However, how important Sony regards the game in the great scheme of things remains unclear, especially if it has to share this E3 with a number of new titles.\n\nDriveclub\n\n Originally intended to be a launch game, this new racer from the makers of MotorStorm slipped from there to the spring to this October. That makes it the only new first party retail game confirmed for Christmas this year, which is a difficult task to shoulder for any title  let alone an untested new driving game. The graphics have improved greatly over the last few months though and considering the quality of the MotorStorm series the final product should hopefully be worth the wait.\n\nThe Last Of Us Remastered\n\n If the rumours of Halo remakes on the Xbox One are true that means that two of the biggest format exclusives this year are going to be HD updates of last gen games. Considering how good The Last Of Us is thats no bad thing, especially for those that never experienced it the first time, but theres no sign yet of any major changes to the game, beyond the improved visuals.\n\nNew Uncharted\n\n Although this is one of the few new games Sony has deigned to announce, almost nothing is known about it other than that the teaser above implies one of the locations is Madagascar. What there has been though is a strange series of exits from developer Naughty Dog, rumoured to be the result of a power struggle within the company. Series writer and creative Amy Hennig has left to work on a Star Wars game at Visceral, the games director left to work at League Of Legends studio Riot Games, and even actor Todd Stashwick  the voice in the trailer  has apparently been recast. Not an auspicious start to one of the most important new games for the PlayStation 4, but it adds credence to the rumour that the game is a reboot and that Nathan Drake and/or his actor Nolan North are also no longer involved.\n\nNew Media Molecule title\n\n The creators of LittleBigPlanet have long admitted theyre working on a new PlayStation 4 game, but all we know at the moment is that its not LittleBigPlanet 3 (although that is also subject to other rumours). They did show off the tech demo above at Gamescom last August, but whether it has any close relationship to the game theyre making is unclear. Although based on their previous work youd have to assume that customisation and user-created content will figure large in whatever theyre doing.\n\nNew Santa Monica Studio title\n\n Despite being arguably Sonys most important first party developer, at least in terms of how much they co-ordinate with all their their other studios, Santa Monica Studio still hasnt announced a single new game for the PlayStation 4. Thats clearly got to change at some point, but theres little clue as to what theyre working on  especially after one project, reportedly a new IP by the director of God Of War III, was cancelled earlier in the year. But that still leaves another project being overseen by God Of War co-creator Cory Barlog, which he has described as freaking huge. Whether its God Of War related or not is unknown, as is how Sony now views that franchise given the lukewarm reaction to God Of War: Ascension.\n\nShadow Of The Beast\n\n A surprise reveal at Gamescom last year, not one word has been heard about this reboot since. The only thing we know is its being developed by little known English studio Heavy Spectrum Entertainment Labs, who have previously only worked on smartphone games. The fact that theyre British presumably means theyre well acquainted with the original Amiga game, but we hope they also realise that although it looked amazing at the time the super shallow gameplay was always pretty awful.\n\nNew Guerilla Games title\n\n The creators of Killzone have always been one of the most talented when it comes to technology, but theyre yet to make a truly great game. Its a long time since theyve made anything that wasnt Killzone-related as well, but apparently their next project is a brand new IP. What is we have no clue, but theyve said its something completely different to Killzone. So presumably not a first person sci-fi shooter.\n\nThe Last Guardian\n\n This is at least the third E3 prediction article weve written in which were forced to admit we have no idea whether the absurdly delayed follow-up to Ico and Shadow Of The Colossus will be on show or not. Although Sony insists the game has not been cancelled theres been barely any rumours about it in the last year, and the project now seems more like an urban legend than an in-development video game.\n\nGravity Rush 2\n\n Although it has settled into a supporting role for the PlayStation 4, and has become a haven for downloadable indie titles, Sony appears to have all but abandoned big budget development work on the PS Vita. E3 would be just the right venue to change all that, but currently the only first party game of any note is a follow-up to action adventure Gravity Rush. Nothing more has been heard about it since the announcement last year though, so at the moment were just hoping it hasnt been cancelled.\n\nProject Beast\n\n Sony have got pretty good at keeping secrets in recent years, with this supposed collaboration with Dark Souls creators From Software being one of the rare exceptions. But although the footage of what seems to be a Dark Souls-seque action adventure, with a shotgun-wielding protagonist, seems to be legit theres nothing in the leaked footage to prove its a PlayStation 4 exclusive. That suggestion has come from the rumours surrounding it and the still uncertain sources that leaked it in the first place.\n\nKill Strain\n\n This rumour is nothing more than a trademark registration made by Sony, but its widely believed to relate to a new game by Syphon Filter creators Bend Studio. Whether that is actually the name of the project though is in a sense irrelevant, as they have already admitted theyre working on something new for the PlayStation 4. Although if the trademark is related it suggests a reveal is relatively close.\n\nGran Turismo 7\n\n Obviously there is going to be a Gran Turismo 7 at some point, the question is when. Gran Turismo 6 was only released last Christmas and was the least well received in the franchise so far, so youd assume the first PlayStation 4 game would require a lot more time in terms of getting the technology right and rethinking the approach. That said a Gran Turismo 7: Prologue release is likely to be a priority for Sony, and a teaser at E3 wouldnt be completely unexpected. It could even end up as a HD port of Grand Turismo 6, although were not sure how that will go down with fans.\n\nLittleBigPlanet 3\n\n Series creators Media Molecule have gone on record as saying that they wont be making any more LittleBigPlanet games but the franchise does seem to be in safe hands, with LittleBigPlanet For PS Vita being very well received by fans. Itd be reasonable to assume that either of the two developers who made that are now working on a full-blown sequel for the PlayStation 4, although current rumours suggest its actually British studio Sumo Digital  who produced the LittleBigPlanet 2 Cross-Controller Pack.\n\nGod Of War IV\n\n As mentioned in the Santa Monica Studio rumours above the future of the God Of War franchise is hard to guess at the moment, given its recent performance. Its still a major series in the US though, so its unlikely Sony will abandon it completely. Especially as there are long-standing rumours of an open world game having been in development. Although whether thats true, and whether its still true, we couldnt say.\n\nNew WipEout title\n\n On the face of it a new WipEout game seems like wishful thinking, especially since the game has never really been a success since the PS one era  and even then only in Europe. More importantly developer Studio Liverpool (what once was Psygnosis) has been closed down, despite them working on two PlayStation 4 games at the time. One of those was apparently WipEout-related and yet even after the closure the studios Twitter and Facebook accounts continued to be updated, including with the message WE. ARE. ALIVE and a promise that, WipEouts passion will live on  Together we are stronger and together we will keep WipEout alive.\n\nRatchet & Clank\n\n Although there are no strong rumours of a new Ratchet & Clank, Sony are unlikely to want to let the series die  especially as theyre working on an animated movie based on the franchise. Series creators Insomniac are currently busy with Sunset Overdrive but many other developers have already worked on the many spin-offs. Ratchet & Clank is an important family-friendly franchise for Sony and given persistent rumours that theyve been trying to buy Crash Bandicoot from Activision its a demographic theyll want to make sure they still appeal to more than Microsoft does."""
#print "select * from contentanalysis.analyze where text='"+text+"'"
text = textify(text[-1000:])#text.replace("'", "").replace('\\', "").replace("\r", " ")[1000:11000]
#print text
response = yahoo.yql.YQLQuery().execute("select * from contentanalysis.analyze where text='"+text+"'")
print response
for x in response['query']['results']['entities']['entity']:
    print x
    print "\n"

